define("wkview:widget/commerce/pinzhuan/model.js",function(e,r,o){function t(){var e=n.get("WkInfo").DocInfo||{},r=e.title||"";return""===r&&console.error("pz got empty query"),r}var n=e("wkcommon:widget/lib/fis/data/data.js"),a="https://wk.baidu.com",c=0,d=[],f=null,i=!1;o.exports.fetchData=function(e){var r=new $.Deferred;return 0===c?(c=1,$.ajax({url:a+"/view/api/pz_pc",dataType:"json",data:{url:location.href,query:t()},success:function(o){if(0===o.code){for($.map(o.data,function(o){o.srcId===e&&r.resolve(o)});d.length>0;){var t=d.pop();$.map(o.data,function(e){e.srcId===t.srcId&&t.defer.resolve(e)})}f=o.data,i=!0}else{for(console.error("pz server data error");d.length>0;){var t=d.pop();t.defer.reject(o.code)}r.reject(o.code)}c=2},fail:function(){for(console.error("pz api network error");d.length>0;){var e=d.pop();e.defer.reject(-1)}r.reject(-1)}})):1===c?d.push({defer:r,srcId:e}):2===c&&(i?setTimeout(function(){$.map(f,function(o){o.srcId===e&&r.resolve(o)})},0):r.reject(-1)),r}});