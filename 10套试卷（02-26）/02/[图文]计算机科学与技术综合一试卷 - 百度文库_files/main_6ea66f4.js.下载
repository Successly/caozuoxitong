define("wkview:widget/common_toc/reader_new/page_main/main.js",function(e,o,i){var n=e("wkcommon:widget/lib/tangram/base/base.js"),a=e("wkview:widget/ui/view/reader_pace/reader_pace.js"),r=e("wkcommon:widget/ui/payCheck/payCheck.js"),t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),d=e("wkview:widget/ui/view/pay_org_vip/pay_org_vip.js"),s=function(e){t.extend(!0,this.ops,e),this.run()};s.prototype={constructor:s,ops:{docId:"",newMark:n.cookie.get("newMark"),bPage:0,bOffset:0,rPage:0,rOffset:0,sendCondition:!0,isOrgvipBuyMember:1,needShowPay:1},run:function(){var e=this,o=this.ops,i=n.lang.eventCenter;if(o.newMark!==o.docId&&(o.bPage=o.bOffset=0),(o.bPage||o.rPage)&&o.bOffset){var s=[o.docId,o.bPage||o.rPage,o.bOffset||o.rOffset].join("|");n.cookie.set("newMark",s,{path:"/view/"})}return o.sendCondition&&i.addEventListener("loadComplete",function(o,n){var r=a.readerPace;e.readerPace=new r(n.reader),e.readerPace.sendPaceInRate(),i.removeEventListener("loadComplete","RP")},"RP"),+o.needShowPay&&(o.isOrgvipBuyMember?(t(".org-pay-hide").css("display","none"),t(".goods-price-wrap").removeClass("mr20")):t(".org-pay-hide").css("display","inline-block"),this.pay=new r({goods_type:1,goods_id:o.docId}),this.payorg=d({goods_type:1,goods_id:o.docId}),t(".btn-payDoc").on("click",function(){e.payorg.init({query:{click_type:"13011003"}})}),window.wenku=window.wenku||{},window.wenku.purchase=function(){}),this}},i.exports=s});